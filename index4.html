<head>
	<!-- Load plotly.js into the DOM -->
	<script src='https://cdn.plot.ly/plotly-2.27.0.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
</head>
<style>
	.parent {
  border: 0px solid black;
  margin: 0rem;
  padding: 2rem 2rem;
  text-align: center;
}
.child {
  display: inline-block;
  border: 0px solid red;
  padding: 1rem 1rem;
  vertical-align: middle;
}
	
</style>
<body>
    <h2 class="red-text" style="color: green;">
      <a href="https://empress637.github.io/">
        Home
      </a>
    </h2>
<div class='parent' display= 'inline-block'>
  <div class='child' id ='myDiv' ></div>
  <div class='child' id='myDiv2' ></div>
</div>
	<script>


d3.csv("/titanic.csv",
  function(titanicData) {
    var classDim = {
      values: titanicData.map(function(row) {return row['Pclass']}),
      categoryorder: 'category ascending',
      label: "Class"
    };

    var genderDim = {
      values: titanicData.map(function(row) {return row['Sex']}),
      label: "Gender"
    };

    var survivalDim = {
      values: titanicData.map(function(row) {
        
        var datasetSur = titanicData.filter((obj) => obj['Survived'] == 1);
var datasetPer = titanicData.filter((obj) => obj['Survived'] == 0);
        
        return [datasetSur]}),
      label: "Outcome",
      categoryarray: [0, 1],
      ticktext: ['perished', 'survived'],
    };

const datasetSur = titanicData.filter((obj) => obj['Survived'] == 1);
const datasetPer = titanicData.filter((obj) => obj['Survived'] == 0);
const datasetMa = titanicData.filter((obj) => obj['Sex'] == 'male' && obj['Survived'] ==1 );
const datasetFe = titanicData.filter((obj) => obj['Sex'] == 'female' && obj['Survived'] ==1);
const datasetMa2 = titanicData.filter((obj) => obj['Sex'] == 'male' && obj['Survived'] ==0 );
const datasetFe2 = titanicData.filter((obj) => obj['Sex'] == 'female' && obj['Survived'] ==0);
const datasets1 = titanicData.filter((obj) => obj['class'] == 1 && obj['Survived'] ==1);
const datasets2 = titanicData.filter((obj) => obj['class'] == 2 && obj['Survived'] ==1);
const datasets3 = titanicData.filter((obj) => obj['class'] == 3 && obj['Survived'] ==1);
const datasetd1= titanicData.filter((obj) => obj['class'] == 1 && obj['Survived'] ==0);
const datasetd2 = titanicData.filter((obj) => obj['class'] == 2 && obj['Survived'] ==0);
const datasetd3 = titanicData.filter((obj) => obj['class'] == 3 && obj['Survived'] ==0);
const datasetas1= titanicData.filter((obj) => obj['age'] == 1 && obj['Survived'] ==1);
const datasetas2 = titanicData.filter((obj) => obj['age'] == 2 && obj['Survived'] ==1);
const datasetas3 = titanicData.filter((obj) => obj['age'] == 3 && obj['Survived'] ==1);
const datasetas4 = titanicData.filter((obj) => obj['age'] == 4 && obj['Survived'] ==1);	
const datasetad1= titanicData.filter((obj) => obj['age'] == 1 && obj['Survived'] ==0);
const datasetad2 = titanicData.filter((obj) => obj['age'] == 2 && obj['Survived'] ==0);
const datasetad3 = titanicData.filter((obj) => obj['age'] == 3 && obj['Survived'] ==0);
const datasetad4 = titanicData.filter((obj) => obj['age'] == 4 && obj['Survived'] ==0);		  
  
    var color = survivalDim.values;
    var colorscale = [[0, 'orange'], [1, 'blue']];

    // Build Traces
    var traces = [
      {type: 'bar',
       name: 'Status',
       orientation: 'h',
       y: ['Survived','Perished'],
       x: [datasetSur.length,datasetPer.length],
       line: {color: color,
              colorscale: colorscale},
       hoveron: 'color',
       hoverinfo: 'count+probability',
       labelfont: {size: 14},
       arrangement: 'freeform'
      }
    ];

  var traces2 = 
      {name: 'Survived',
       type: 'bar',
       orientation: 'h',
       y: ['Male','Female'],
       x: [datasetMa.length,datasetFe.length]
      }
    ;
  
  var traces3 = {name: 'Perished',
       type: 'bar',
       orientation: 'h',
       y: ['Male','Female'],
       x: [datasetMa2.length,datasetFe2.length],
	 line: {color: orange}
      };
  
    var layout = {width: 300, barmode:'group',showlegend: true};
    var data2 = [traces2, traces3];
  
    // Make plot
  Plotly.newPlot('myDiv', traces, layout);
  Plotly.newPlot('myDiv2', data2, layout);
  });
	</script>

</body>
