<head>
	<!-- Load plotly.js into the DOM -->
	<script src='https://cdn.plot.ly/plotly-2.27.0.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
</head>
<style>
	.parent {
 
  text-align: left;
}
.child {
  display: inline-block;
  padding: 1rem 1rem;
  vertical-align: left;
}
	
</style>
<body>
    <h2 class="red-text" style="color: green;">
      <a href="https://empress637.github.io/">
        Home
      </a>
    </h2>
<div class='parent' display= 'inline-block'>
  <div class='child' id ='myDiv1' ></div>
  <div class='child' id	='myDiv2' ></div>
  <div class='child' id ='myDiv3' ></div>
  <div class='child' id	='myDiv4' ></div>
</div>
	<script>


d3.csv("/titanic.csv",
  function(titanicData) {

const datasetSur = titanicData.filter((obj) => obj['Survived'] == 1);
const datasetPer = titanicData.filter((obj) => obj['Survived'] == 0);
const datasetMa = titanicData.filter((obj) => obj['Sex'] == 'male' && obj['Survived'] ==1 );
const datasetFe = titanicData.filter((obj) => obj['Sex'] == 'female' && obj['Survived'] ==1);
const datasetMa2 = titanicData.filter((obj) => obj['Sex'] == 'male' && obj['Survived'] ==0 );
const datasetFe2 = titanicData.filter((obj) => obj['Sex'] == 'female' && obj['Survived'] ==0);
const datasets1 = titanicData.filter((obj) => obj['Pclass'] == 1 && obj['Survived'] ==1);
const datasets2 = titanicData.filter((obj) => obj['Pclass'] == 2 && obj['Survived'] ==1);
const datasets3 = titanicData.filter((obj) => obj['Pclass'] == 3 && obj['Survived'] ==1);
const datasetd1= titanicData.filter((obj) => obj['Pclass'] == 1 && obj['Survived'] ==0);
const datasetd2 = titanicData.filter((obj) => obj['Pclass'] == 2 && obj['Survived'] ==0);
const datasetd3 = titanicData.filter((obj) => obj['Pclass'] == 3 && obj['Survived'] ==0);
const datasetas1 = titanicData.filter((obj) => obj['Age'] > 20  && obj['Survived'] ==1);
const datasetas2 = titanicData.filter((obj) => obj['Age'] > 12 && obj['Age'] < 20 && obj['Survived'] ==1);
const datasetas3 = titanicData.filter((obj) => obj['Age'] < 13 && obj['Survived'] ==1);
const datasetas4 = titanicData.filter((obj) => obj['Age'] == null && obj['Survived'] ==1);	
const datasetad1 = titanicData.filter((obj) => obj['Age'] > 20 && obj['Survived'] ==0);
const datasetad2 = titanicData.filter((obj) => obj['Age'] > 12 && obj['Age'] < 20 && obj['Survived'] ==0);
const datasetad3 = titanicData.filter((obj) => obj['Age'] < 13 && obj['Survived'] ==0);
const datasetad4 = titanicData.filter((obj) => obj['Age'] == null && obj['Survived'] ==0 );		  

    var colorscale = [[0, 'orange'], [1, 'blue']];

    // Build Traces
    var traces1 = 
      {type: 'bar',
       name: 'Status',
       orientation: 'h',
       y: ['Survived','Perished'],
       x: [datasetSur.length,datasetPer.length],
      // line: {color: 'orange'},
       hoveron: colorscale,
       hoverinfo: 'count+probability',
       labelfont: {size: 14},
       arrangement: 'freeform',
       line: {colorscale: colorscale}
      };

  var traces2 = 
      {name: 'Survived',
       type: 'bar',
       orientation: 'h',
       y: ['Male','Female'],
       x: [datasetMa.length,datasetFe.length],
       line: {colorscale: colorscale}
      } ;
  
  var traces3 = {name: 'Perished',
       type: 'bar',
       orientation: 'h',
       y: ['Male','Female'],
       x: [datasetMa2.length,datasetFe2.length],
	line: {colorscale: colorscale}
      };

  var traces4 = {name: 'Class Survived',
       type: 'bar',
       orientation: 'h',
       y: ['Third','Second', 'First'],
       x: [datasets3.length,datasets2.length,datasets1.length],
	line: {colorscale: colorscale}
      };
  var traces5 = {name: 'Class Perished',
       type: 'bar',
       orientation: 'h',
       y: ['Third','Second', 'First'],
       x: [datasetd3.length,datasetd2.length,datasetd1.length],
	line: {colorscale: colorscale}
      };

  var traces6 = {name: 'Age Survived',
       type: 'bar',
       orientation: 'h',
       y: ['Unknown','Child', 'Teen', 'Adult'],
       x: [datasetas4.length,datasetas3.length,datasetas2.length,datasetas1.length],
	line: {colorscale: colorscale}
      };
  var traces7 = {name: 'Age Perished',
       type: 'bar',
       orientation: 'h',
       y: ['Unknown','Child', 'Teen', 'Adult'],
       x: [datasetad4.length,datasetad3.length,datasetad2.length,datasetad1.length],
	line: {colorscale: colorscale}
      };	  
	  
    var layout = {width: 300, barmode:'group',showlegend: true};
    var data1 = [traces1];
    var data2 = [traces2, traces3];
    var data3 = [traces4, traces5];	
    var data4 = [traces6, traces7];  
  
    // Make plot
  Plotly.newPlot('myDiv1', data1, layout);
  Plotly.newPlot('myDiv2', data2, layout);
  Plotly.newPlot('myDiv3', data3, layout);
  Plotly.newPlot('myDiv4', data4, layout);	  
  });
	</script>

</body>
